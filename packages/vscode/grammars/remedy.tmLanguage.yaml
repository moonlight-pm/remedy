name: remedy partial
scopeName: source.part
fileTypes: [part]

patterns:
  - include: '#html'
  - include: '#typescript'

repository:
  typescript:
    patterns:
      - begin: \A
        end: ^(?=<)
        name: source.ts
        contentName: meta.embedded.block.typescript
        patterns:
          - include: source.ts

  html:
    patterns:
      - begin: ^(?=<)
        end: ''
        name: text.html.remedy
        contentName: meta.embedded.block.html
        patterns:
          # - include: '#expression'
          - include: text.html.remedy

  expression:
    patterns:
      - begin: \{
        beginCaptures:
          '0': { name: punctuation.definition.generic.begin.html }
        end: \}
        endCaptures:
          '0': { name: punctuation.definition.generic.end.html }
        patterns:
          - include: source.ts#expression
